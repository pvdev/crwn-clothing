{"ast":null,"code":"import _defineProperty from \"/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/src/components/sign-up/sign-up.component.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport FormInput from '../form-input/form-input.component';\nimport CustomButton from '../custom-button/custom-button.component';\nimport { auth, createUserProfileDocument } from '../../firebase/firebase.utils';\nimport './sign-up.styles.scss';\n\nvar SignUp = function SignUp() {\n  var _useState = useState({\n    displayName: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userCredentials = _useState2[0],\n      setUserCredentials = _useState2[1];\n\n  var persistDataOverRerender = useRef({\n    willUnmount: false\n  });\n  useEffect(function () {\n    return function () {\n      persistDataOverRerender.current.willUnmount = true;\n      console.log('useEffect executing...');\n    };\n  }, []);\n  var displayName = userCredentials.displayName,\n      email = userCredentials.email,\n      password = userCredentials.password,\n      confirmPassword = userCredentials.confirmPassword;\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var _ref2, user, code, message;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (!(password !== confirmPassword)) {\n                _context.next = 4;\n                break;\n              }\n\n              alert(\"Passwords don't match!\");\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _context.prev = 4;\n              _context.next = 7;\n              return auth.createUserWithEmailAndPassword(email, password);\n\n            case 7:\n              _ref2 = _context.sent;\n              user = _ref2.user;\n              _context.next = 11;\n              return createUserProfileDocument(user, {\n                displayName: displayName\n              });\n\n            case 11:\n              !persistDataOverRerender.current.willUnmount && setUserCredentials({\n                displayName: '',\n                email: '',\n                password: '',\n                confirmPassword: ''\n              });\n              _context.next = 19;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](4);\n              // Handle Errors here.\n              code = _context.t0.code, message = _context.t0.message;\n\n              if (code === 'auth/weak-password') {\n                alert('The password is too weak.');\n              } else if (code === 'auth/email-already-in-use') {\n                alert('The email address is already in use.');\n              } else {\n                alert(message);\n              }\n\n              console.error(_context.t0);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 14]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = function handleChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setUserCredentials(_objectSpread({}, userCredentials, _defineProperty({}, name, value)));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"sign-up\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"I do not have an account.\"), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Sign up with your email and password.\"), React.createElement(\"form\", {\n    className: \"sign-up-form\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(FormInput, {\n    type: \"text\",\n    name: \"displayName\",\n    value: displayName,\n    onChange: handleChange,\n    label: \"Display Name\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(FormInput, {\n    type: \"email\",\n    name: \"email\",\n    value: email,\n    onChange: handleChange,\n    label: \"Email\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(FormInput, {\n    type: \"password\",\n    name: \"password\",\n    value: password,\n    onChange: handleChange,\n    label: \"Password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(FormInput, {\n    type: \"password\",\n    name: \"confirmPassword\",\n    value: confirmPassword,\n    onChange: handleChange,\n    label: \"Confirm Password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(CustomButton, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \" SIGN UP \")));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/pvessels/Dropbox/development/react-complete-dev-2019/crwn-clothing/src/components/sign-up/sign-up.component.jsx"],"names":["React","useState","useEffect","useRef","FormInput","CustomButton","auth","createUserProfileDocument","SignUp","displayName","email","password","confirmPassword","userCredentials","setUserCredentials","persistDataOverRerender","willUnmount","current","console","log","handleSubmit","event","preventDefault","alert","createUserWithEmailAndPassword","user","code","message","error","handleChange","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\n\nimport FormInput from '../form-input/form-input.component'\nimport CustomButton from '../custom-button/custom-button.component'\n\nimport { auth, createUserProfileDocument } from '../../firebase/firebase.utils'\n\nimport './sign-up.styles.scss'\n\nconst SignUp = () => {\n  const [userCredentials, setUserCredentials] = useState({\n    displayName: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  })\n\n  const persistDataOverRerender = useRef({ willUnmount: false })\n\n  useEffect(\n    () => () => {\n      persistDataOverRerender.current.willUnmount = true\n      console.log('useEffect executing...')\n    },\n    []\n  )\n\n  const { displayName, email, password, confirmPassword } = userCredentials\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n\n    if (password !== confirmPassword) {\n      alert(\"Passwords don't match!\")\n      return\n    }\n\n    try {\n      const { user } = await auth.createUserWithEmailAndPassword(\n        email,\n        password\n      )\n\n      await createUserProfileDocument(user, { displayName })\n\n      !persistDataOverRerender.current.willUnmount &&\n        setUserCredentials({\n          displayName: '',\n          email: '',\n          password: '',\n          confirmPassword: '',\n        })\n    } catch (error) {\n      // Handle Errors here.\n      let { code, message } = error\n      if (code === 'auth/weak-password') {\n        alert('The password is too weak.')\n      } else if (code === 'auth/email-already-in-use') {\n        alert('The email address is already in use.')\n      } else {\n        alert(message)\n      }\n      console.error(error)\n    }\n  }\n\n  const handleChange = event => {\n    const { name, value } = event.target\n\n    setUserCredentials({ ...userCredentials, [name]: value })\n  }\n\n  return (\n    <div className='sign-up'>\n      <h2 className='title'>I do not have an account.</h2>\n      <span>Sign up with your email and password.</span>\n      <form className='sign-up-form' onSubmit={handleSubmit}>\n        <FormInput\n          type='text'\n          name='displayName'\n          value={displayName}\n          onChange={handleChange}\n          label='Display Name'\n          required\n        />\n        <FormInput\n          type='email'\n          name='email'\n          value={email}\n          onChange={handleChange}\n          label='Email'\n          required\n        />\n        <FormInput\n          type='password'\n          name='password'\n          value={password}\n          onChange={handleChange}\n          label='Password'\n          required\n        />\n        <FormInput\n          type='password'\n          name='confirmPassword'\n          value={confirmPassword}\n          onChange={handleChange}\n          label='Confirm Password'\n          required\n        />\n        <CustomButton type='submit'> SIGN UP </CustomButton>\n      </form>\n    </div>\n  )\n}\n\nexport default SignUp\n"]},"metadata":{},"sourceType":"module"}